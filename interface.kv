#:kivy 1.0
#:import NoTransition kivy.uix.screenmanager.NoTransition

<MainWindow>:
    MDToolbar:
        title: 'Song Recommender'
        halign: 'left'
        background_color: 'green'
    WindowManager:
        name: 'Window Manager'
        id: WM
        transition: NoTransition()
        loginPage: loginPage
        genrePage: genrePage
        artistPage: artistPage
        LoginPage:
            name: 'Login Page'
            id: loginPage
        GenrePage:
            name: 'Genre Page'
            id: genrePage
        ArtistPage:
            name: 'Artist Page'
            id: artistPage
        SongPage:
            name: 'Song Page'
            id: songPage

<LoginPage>:
    user: username
    link: link
    GridLayout:
        cols: 1
    Label:
        text: "Login"
        bold: True
        font_size: 70
        # Carolina Blue: [200, 100, 1, 100]
        color: [200, 150, 100, 2]
        pos_hint: {'center_x': 0.5, 'center_y': 0.72}
    TextInput:
        id: username
        hint_text: 'Enter Name'
        multiline: False
        size_hint: (0.3, 0.05)
        pos_hint: {'center_x': 0.5, 'center_y': 0.63}
        on_text: app.root.set_username()
    TextInput:
        id: link
        hint_text: 'Paste Spotify Link'
        multiline: False
        size_hint: (0.3, 0.05)
        pos_hint: {'center_x': 0.5, 'center_y': 0.56}
        on_text: app.root.set_spotlink()
    Button:
        id: toNextPage
        text: 'continue'
        background_color: 'blue'
        size_hint: (0.2, 0.05)
        pos_hint: {'center_x': 0.5, 'center_y': 0.49}
        on_press: app.root.ids.WM.current = 'Genre Page'

<GenrePage>:
    on_pre_enter: app.root.genreButtons()
    stack: stack
    StackLayout:
        id: stack
        orientation: 'lr-tb'
        Button:
            text: 'continue'
            background_color: 'blue'
            size_hint: (0.2, 0.147)
            pos_hint: {'center_x': 0.5, 'center_y': 0.39}
            on_press: app.root.ids.WM.current = 'Artist Page'

<ArtistPage>:
    stck: stck
    StackLayout:
        id: stck
        orientation: 'lr-tb'
        on_pre_enter: 
        TextInput:
            id: searchEntry
            hint_text: 'Enter Artist Name'
            multiline: False
            size_hint: (0.3, 0.05)
            pos_hint: {'center_x': 0.5, 'center_y': 0.53}
            on_text: app.root.artist_search()
        Button:
            id: continue
            text: 'continue to next page'
            background_color: 'blue'
            size_hint: (0.2, 0.05)
            pos_hint: {'center_x': 0.5, 'center_y': 0.39}
            on_press: app.root.ids.WM.current = 'Song Page'
        ScrollView:
            id: searchResults
            title: 'Search Results'
            size_hint: (0.5, 1)
            background_color: 'blue'
            # pos_hint: {'center_x': 0.2, 'center_y': 0.35}
    GridLayout:
        id: topSongs
        title: 'Top 10 Songs'
        rows:10
        cols:1
        size_hint: (0.49, 0.83)
        pos_hint: {'center_x': 0.252, 'center_y': 0.53}

<SongPage>:
    on_pre_enter: 
        app.root.set_songs_to_ask()
        app.root.initialize()
    BoxLayout:
        id: songBox
        orientation: 'horizontal'
        Button:
            id: song
            background_color: 'blue'
            size_hint: (1.0, 0.5)
            pos_hint: {'center_y': 0.75}
    BoxLayout:
        id: decisionBoxs
        orientation: 'horizontal'
        Button:
            id: dislike
            name: 'no'
            text: 'NO'
            background_color: 'red'
            size_hint: (0.5, 0.5)
            on_press: app.root.make_decision(False)
        Button:
            id: like
            name: 'yes'
            text: 'YES'
            background_color: 'green'
            size_hint: (0.5, 0.5)
            pos_hint: {'center_x': 0.5}
            on_press: app.root.make_decision(True)